{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mohand.abdelrahman/Documents/NodaJS/expense-tracker-MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mohand.abdelrahman/Documents/NodaJS/expense-tracker-MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mohand.abdelrahman/Documents/NodaJS/expense-tracker-MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useReducer}from'react';import AppReducer from'./AppReducer';import axios from'axios';var initialState={transactions:[],loading:true};export var GlobalContext=createContext(initialState);// provider component\nexport var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Actions\nfunction getTransactions(){return _getTransactions.apply(this,arguments);}function _getTransactions(){_getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var transactions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios('/api/v1/transactions');case 3:transactions=_context.sent;dispatch({type:'GET_TRANSACTIONS',payload:transactions.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log('getTransactions -> error',_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTransactions.apply(this,arguments);}function deleteTransaction(_x){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/api/v1/transactions/\".concat(id));case 3:dispatch({type:'DELETE_TRANSACTION',payload:id});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log('deleteTransaction -> error',_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _deleteTransaction.apply(this,arguments);}function addTransation(_x2){return _addTransation.apply(this,arguments);}function _addTransation(){_addTransation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(transaction){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post('/api/v1/transactions',transaction);case 3:res=_context3.sent;dispatch({type:'ADD_TRANSACTION',payload:res.data.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log('addTransation -> error',_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return _addTransation.apply(this,arguments);}return/*#__PURE__*/React.createElement(GlobalContext.Provider,{value:{transactions:state.transactions,deleteTransaction:deleteTransaction,addTransation:addTransation,getTransactions:getTransactions,loading:state.loading}},children);};","map":{"version":3,"sources":["/Users/mohand.abdelrahman/Documents/NodaJS/expense-tracker-MERN/client/src/context/globalState.js"],"names":["React","createContext","useReducer","AppReducer","axios","initialState","transactions","loading","GlobalContext","GlobalProvider","children","state","dispatch","getTransactions","type","payload","data","console","log","deleteTransaction","id","delete","addTransation","transaction","post","res"],"mappings":"ojBAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,UAA/B,KAAiD,OAAjD,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,YAAY,CAAE,EADK,CAEnBC,OAAO,CAAE,IAFU,CAArB,CAKA,MAAO,IAAMC,CAAAA,aAAa,CAAGP,aAAa,CAACI,YAAD,CAAnC,CAEP;AACA,MAAO,IAAMI,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBACpBR,UAAU,CAACC,UAAD,CAAaE,YAAb,CADU,4CACvCM,KADuC,iBAChCC,QADgC,iBAG9C;AAH8C,QAI/BC,CAAAA,eAJ+B,uJAI9C,0LAE+BT,CAAAA,KAAK,CAAC,sBAAD,CAFpC,QAEUE,YAFV,eAGIM,QAAQ,CAAC,CACPE,IAAI,CAAE,kBADC,CAEPC,OAAO,CAAET,YAAY,CAACU,IAAb,CAAkBA,IAFpB,CAAD,CAAR,CAHJ,+EAQIC,OAAO,CAACC,GAAR,CAAY,0BAAZ,cARJ,oEAJ8C,0DAiB/BC,CAAAA,iBAjB+B,+JAiB9C,kBAAiCC,EAAjC,8JAEUhB,CAAAA,KAAK,CAACiB,MAAN,gCAAqCD,EAArC,EAFV,QAGIR,QAAQ,CAAC,CACPE,IAAI,CAAE,oBADC,CAEPC,OAAO,CAAEK,EAFF,CAAD,CAAR,CAHJ,kFAQIH,OAAO,CAACC,GAAR,CAAY,4BAAZ,eARJ,qEAjB8C,4DA6B/BI,CAAAA,aA7B+B,oJA6B9C,kBAA6BC,WAA7B,sKAEsBnB,CAAAA,KAAK,CAACoB,IAAN,CAAW,sBAAX,CAAmCD,WAAnC,CAFtB,QAEUE,GAFV,gBAGIb,QAAQ,CAAC,CACPE,IAAI,CAAE,iBADC,CAEPC,OAAO,CAAEU,GAAG,CAACT,IAAJ,CAASA,IAFX,CAAD,CAAR,CAHJ,mFAQIC,OAAO,CAACC,GAAR,CAAY,wBAAZ,eARJ,sEA7B8C,gDAyC9C,mBACE,oBAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAC7BZ,YAAY,CAAEK,KAAK,CAACL,YADS,CAE7Ba,iBAAiB,CAAjBA,iBAF6B,CAG7BG,aAAa,CAAbA,aAH6B,CAI7BT,eAAe,CAAfA,eAJ6B,CAK7BN,OAAO,CAAEI,KAAK,CAACJ,OALc,CAA/B,EAOGG,QAPH,CADF,CAWD,CApDM","sourcesContent":["import React, { createContext, useReducer } from 'react'\nimport AppReducer from './AppReducer'\nimport axios from 'axios'\nconst initialState = {\n  transactions: [],\n  loading: true\n}\n\nexport const GlobalContext = createContext(initialState)\n\n// provider component\nexport const GlobalProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AppReducer, initialState)\n\n  // Actions\n  async function getTransactions() {\n    try {\n      const transactions = await axios('/api/v1/transactions')\n      dispatch({\n        type: 'GET_TRANSACTIONS',\n        payload: transactions.data.data\n      })\n    } catch (error) {\n      console.log('getTransactions -> error', error)\n    }\n  }\n\n\n  async function deleteTransaction(id) {\n    try {\n      await axios.delete(`/api/v1/transactions/${id}`)\n      dispatch({\n        type: 'DELETE_TRANSACTION',\n        payload: id\n      })\n    } catch (error) {\n      console.log('deleteTransaction -> error', error)\n    }\n  }\n\n  async function addTransation(transaction) {\n    try {\n      const res = await axios.post('/api/v1/transactions', transaction)\n      dispatch({\n        type: 'ADD_TRANSACTION',\n        payload: res.data.data\n      })\n    } catch (error) {\n      console.log('addTransation -> error', error)\n    }\n  }\n\n  return (\n    <GlobalContext.Provider value={{\n      transactions: state.transactions,\n      deleteTransaction,\n      addTransation,\n      getTransactions,\n      loading: state.loading\n    }}>\n      {children}\n    </GlobalContext.Provider>\n  )\n}"]},"metadata":{},"sourceType":"module"}